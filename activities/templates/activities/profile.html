{% extends 'activities/base.html' %}
{% load static %}

{% block title %}プロフィール{% endblock %}
{% block page_title %}プロフィール{% endblock %}
{% block hamburger_title %}プロフィール{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'activities/profile.css' %}">
<div class="profile-container new-layout">
    <div class="profile-top">
        <div class="avatar-col">
            <div class="avatar-circle">
                <img src="{% static 'activities/default-avatar.png' %}" alt="avatar">
            </div>
        </div>
        <div class="info-col">
            <div class="label-small">ユーザー名</div>
            <div class="name-row">
                <h1 class="big-name">{% if user.first_name or user.last_name %}{{ user.first_name }} {{ user.last_name
                    }}{% else %}{{ user.username }}{% endif %}</h1>
                <a href="#" class="icon-edit" aria-label="編集">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"
                            fill="#333" />
                    </svg>
                </a>
            </div>
            <div class="streak">継続日数 {{ streak_days }} 日</div>
        </div>
    </div>

   <div class="profile-input-group">
        <textarea id="intro" placeholder="自己紹介を入力してください"></textarea>
    </div>


    <div class="settings-list">
        <a href="{% url 'change_email' %}" class="settings-item email-change">
            <span class="item-icon"></span>
            <span class="item-text">メールアドレス変更</span>
            <p>現在のメール: {{ user.email }}</p>
        </a>
        <div class="divider"></div>
        <a href="{% url 'change_password' %}" class="settings-item change-password">
            <span class="item-icon"></span>
            <span class="item-text">パスワード変更</span>
        </a>

        <div class="divider"></div>
        <a href="{% url 'login' %}" class="settings-item">
            <span class="item-icon"></span>
            <span class="item-text">ログアウト</span>
        </a>
    </div>

</div>

<!-- <script>
    // 安全にイベントを登録（要素が存在する場合のみ）
    const editIcon = document.querySelector('.icon-edit');
    if (editIcon) {
        editIcon.addEventListener('click', function (e) {
            e.preventDefault();
            alert('プロフィール編集機能は近日公開予定です');
        });
    }

    const changePassword = document.querySelector('.change-password');
    if (changePassword) {
        changePassword.addEventListener('click', function (e) {
            e.preventDefault();
            alert('パスワード変更機能は近日公開予定です');
        });
    }

    const emailChange = document.querySelector('.email-change');
    if (emailChange) {
        emailChange.addEventListener('click', function (e) {
            e.preventDefault();
            alert('メールアドレス変更機能は近日公開予定です');
        });
    }
</script> -->
{% endblock %}